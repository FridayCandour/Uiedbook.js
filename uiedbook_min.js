//YOU SHOULD GET A COPY OF THE APACHE LICENSE V 2.0 IF IT DOESN'T ALREADY COME WITH THIS MODULE

"use strict";const css=(e,t,n)=>{"object"==typeof t&&(n=t,t="");const i=""+e+t+"{";let o="",r="";for(const[e,t]of Object.entries(n))o+=e+": "+t+";";let s=document.querySelector("style");null===s&&(s=document.createElement("style")),r+=s.innerHTML,r+=i+o+"}",s.innerHTML=r,document.head.append(s)},media=(e,...t)=>{const n="@media only screen and ("+e+") {";let i="  ",o=" ";const r=t.length;let s,a="  ";const l=e=>{for(const[n,o]of Object.entries(t[e][1]))i+=n+": "+o+";";return o+=t[e][0]+"{"+i+"}"};for(let e=0;e<r;e++)a+=l(e);let c=document.querySelector("style");null===c&&(c=document.createElement("style")),c.media="screen",s=c.innerHTML,s+=n+a+"}",c.innerHTML=s,document.head.append(c)},animate=(e,...t)=>{const n="@keyframes "+e+" {",i=t.length;let o=" ",r=" ",s="  ",a=null;const l=e=>{for(const[n,i]of Object.entries(t[e][1]))o+=n+": "+i+";";return r+=t[e][0]+"{"+o+"}"};for(let e=0;e<i;e++)s+=l(e);let c=document.querySelector("style");null===c&&(c=document.createElement("style")),c.media="screen",a=c.innerHTML,a+=n+s+"}",c.innerHTML=a,document.head.append(c)},build=(...e)=>{let t=1;function n(e="",t={},n){const i=document.createElement(e);for(const[e,n]of Object.entries(t))i[e]=n;if(n)if(isArray(n)){const e=new DocumentFragment;n.forEach(t=>{e.append(t)}),i.append(e)}else i.append(n);return i}if("object"==typeof e[0]){t=e.lenght;const i=new DocumentFragment;for(;t>0;){const o=n(e[t][0],e[t][1],e[t][2]);i.append(o),t--}return i}if("string"==typeof e[0]){return n(e[0],e[1],e[2])}},buildTo=(e,t)=>{"string"==typeof t?[...document.querySelectorAll(t)].forEach(t=>t.appendChild(e)):t.append(e)},p=build("div",{title:"title",innerText:"am a title",onclick:function(){console.log("i was clicked")}},build("span",{innerText:"am a span",title:"title"}));buildTo(p,"body");const routes={},route=function(e="/",t,n){const i=document.createElement("a");return i.href=window.location.href.replace(/#(.*)$/,"")+"#"+e,routes[e]={templateId:t,controller:n},i},router=function(e){e.preventDefault();const t=window.location.hash.slice(1)||"/",n=routes[t];n&&n.controller()};window.addEventListener("hashchange",router),window.addEventListener("load",router);const xhr=function(e,t){const n=new XMLHttpRequest;let i=null;return n.open(e,t,!0),i=n.onload=function(){return n.response},n.send(),i},u=(...e)=>{const t=e.length,[n,i]=e;let o,r=!1;if(1===t&&"string"==typeof n?o=document.querySelector(n):1===t&&"string"!=typeof n?o=n:2===t&&"number"!=typeof i?(r=!0,o=document.querySelectorAll(n)):"number"==typeof i&&(o=document.querySelectorAll(n)[i]),!o)throw new Error('element "'+n+'" not found');return{style(e){for(const[t,n]of Object.entries(e))r?o.forEach(e=>{e.style[t]=n}):o.style[t]=n},config(e){if(!e)throw new Error(`the variable is not an object ${e}`);for(const[t,n]of Object.entries(e))o[t]=n},appendTo(e,t,n=1){if(void 0===t||void 0===e)throw new Error("type or attribute not given | not enough parameters to work with");const i=new DocumentFragment;if(r){for(let o=0;o<n;o++){const n=document.createElement(e);for(const[e,i]of Object.entries(t))n[e]=i;i.append(n)}o.forEach(e=>{e.append(i)})}else{for(let o=0;o<n;o++){const n=document.createElement(e);for(const[e,i]of Object.entries(t))n[e]=i;i.append(n)}o.append(i)}},on(e,t){function n(e){return e.preventDefault(),t(e)}return r?o.forEach(t=>{t.addEventListener(e,n,!1)}):o.addEventListener(e,n,!1)},attr(e){if("object"==typeof e)if(r)for(const[t,n]of Object.entries(e)){if(null===t)return o.getAttribute(t);o.forEach(e=>e.setAttribute(t,n))}else for(const[t,n]of Object.entries(e)){if(null===t)return o.getAttribute(t);o.setAttribute(t,n)}},removeAttr(e){null!==e&&(r?o.forEach(t=>t.removeAttribute(e)):o.removeAttribute(e))},html(e){r?o.forEach(t=>t.innerHTML=e):o.innerHTML=e},text(e){r?o.forEach(t=>t.textContent=e):o.textContent=e},addClass(e){r?o.forEach(t=>t.classList.add(e)):o.classList.add(e)},removeClass(e){r?o.forEach(t=>t.classList.remove(e)):o.classList.remove(e)},hide(){r?o.forEach(e=>e.style.display="none"):o.style.display="none"},toggleClass(){r?"none"===o[0].style.display?o.forEach(e=>e.style.display="block"):o.forEach(e=>e.style.display="none"):"none"===o.style.display?o.style.display="block":o.style.display="none"},show(){r?o.forEach(e=>e.style.display="block"):o.style.display="block"},box(e,t,n="transparent"){r?o.forEach(i=>{i.style.width=e,i.style.height=t,i.style.backgroundColor=n}):(o.style.width=e,o.style.height=t,o.style.backgroundColor=n)},scrollTo(e=!0){o.scrollIntoView(e)},add(e){o.append(e)},remove(e){o.removeChild(o.childNodes[e])},fullScreen:()=>({toggle:()=>{document.fullscreenElement?document.exitFullscreen():o.requestFullscreen().catch(e=>{alert(`Error! failure attempting to enable full-screen mode: ${e.message} (${e.name})`)})},set(){o.requestFullscreen().catch(e=>{alert(`Error! failure attempting to enable\n full-screen mode: ${e.message}\n (${e.name})`)})},exist(){document.exitFullscreen()}})}},isEmptyObject=function(e){for(const t in e)return!1;return!0};function isArray(e){for(let t in e)return(t*=1)+1===1}const each=function(e,t){let n,i=0;if("object"==typeof e){for(n=e.length;i<n;i++)if(!1===t.call(e[i],i,e[i])){console.log(e[i]);break}}else for(i in e)if(!1===t.call(e[i]))break;return e};function intersect(e,t,n){const{root:i,rootMargin:o,threshold:r}=t,s=new IntersectionObserver(n,{root:i,rootMargin:o,threshold:r}),a=document.querySelector(e);s.observe(a)}const error=e=>{throw new Error(e)},get=(...e)=>{const[t,n]=e;let i;return 1===e.length?i=document.querySelector(t):2===e.length&&"number"!=typeof n?i=document.querySelectorAll(t):"number"==typeof n&&(i=document.querySelectorAll(t)[n]),i},rad=e=>Math.floor(Math.random()*Math.floor(e)),makeClass=(e,t)=>{const n=document.createElement("style"),i=e+"{"+t+"}";n.innerHTML=i,document.body.appendChild(n)},create=(e="div",t="")=>{const n=document.createElement(e);return n.setAttribute("id",t),document.body.appendChild(n),n},download=function(e,t,n){const i=new Blob([t.buffer],{type:e}),o=URL.createObjectURL(i),r=document.createElement("a");return r.setAttribute("href",o),r.setAttribute("download",n),r},debounce=(e,t=600)=>{let n=null;clearTimeout(n),n=setTimeout(()=>{e()},t)};let callStack=[];const keep=function(e,t){const n="object"==typeof e?e:null;let i="number"==typeof t?t:1;if("string"==typeof e&&"number"==typeof i){if(callStack.indexOf(e)>-1)return;for(;i>0;i--)callStack.push(e)}else if(null!==n)for(let[t,i]of Object.entries(n)){if(callStack.indexOf(t)>-1)return callStack.splice(e,1),!0;for(;i>0;i--)callStack.push(t)}},check=function(e){return callStack.indexOf(e)>-1&&(callStack.filter(t=>!(e===t)),!0)},log=e=>{if(e)console.log(e);else if(callStack.length>0)return console.log(callStack),callStack},store=(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},retrieve=e=>{localStorage.getItem(e)},remove=e=>{localStorage.removeItem(e)},getKey=e=>{window.localStorage.key(e)},clear=()=>{localStorage.clear()},onKeys=(e,t,n=document,i=!0)=>{if(!e||!callStack)throw new Error("no keys or callbacks given");const o=[...e];n.addEventListener("keydown",e=>{i&&e.preventDefault(),keep(e.key,1)},!1),n.addEventListener("keyup",e=>{let n=0;for(let e=0;e<o.length&&check(o[e]);e++)++n,n=0,callStack=[];if(n!==o.length)return!1;e.preventDefault(),t.call(e),n=0,callStack=[]},!1)},continuesKeys=(e,t,n=0,i=document,o=!0)=>{if(!e||!callStack)throw new Error("no keys or callbacks given");const r=[...e];i.addEventListener("keydown",e=>{keep(e.key,1),callStack.length===r.length&&function(e){let i=0;for(let e=0;e<r.length;e++){if(!check(r[e])){i=0,callStack=[];break}++i}if(i!==r.length)return!1;o&&e.preventDefault(),console.log(n),debounce(()=>t.call(e),n),i=0,callStack=[]}(e)})};function swipe(e){const t={};let n=0,i=0;if("object"!=typeof e)throw new Error("no call given for the swipe handler");for(const[n,i]of Object.entries(e))t[n]=i;document.body.addEventListener("touchstart",function(e){n=e.changedTouches[0].screenX,i=e.changedTouches[0].screenY}),document.body.addEventListener("touchend",function(e){const r=e.changedTouches[0].screenX-n,s=e.changedTouches[0].screenY-i,a=Math.abs(r/s),l=Math.abs(s/r);Math.abs(a>l?r:s)<10&&t.touch&&o.touch(t.touch),a>l?r>=0?t.right&&o.right(t.right):t.left&&o.left(t.left):s>=0?t.down&&o.down(t.down):t.up&&o.up(t.up)});const o={touch:e=>e(),right:e=>e(),left:e=>e(),down:e=>e(),up:e=>e()}}const buildCanvas=function(e,t=window.innerWidth,n=window.innerHeight){const i=document.createElement("canvas"),o=i.getContext("2d"),r=window.devicePixelRatio/["webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio"].reduce(function(e,t){return o.hasOwnProperty(t)?o[t]:1});return i.id=void 0===e?"canvas":e,i.width=Math.round(t*r),i.height=Math.round(n*r),i.style.width=t+"px",i.style.height=n+"px",i.style.backgroundColor="black",o.setTransform(r,0,0,r,0,0),i},appendCanvas=(e,t,n,i)=>{const o=buildCanvas(e,t,n);let r;return"string"!=typeof i&&void 0!==i?r=i:"string"==typeof i?r=document.querySelector(i):void 0===i&&(r=document.body),r.style.boxSizing="border-box",r.append(o),o},re=function(){const e=[];const t=[],n=[];return{build:function(e){const t=document.createElement("div");return e&&t.setAttribute("id",e),u(t).style({height:"100vh",width:"100vw",backgroundColor:"black"}),t},makeWidget:function(e){return this.wig=document.createElement("div"),this.wig.className=e,this.wig.id=e,document.body.append(this.wig),this.wig},mount:function(t,n){if(u("body").appendTo("div",{id:"RE_gameframe"}),1!==e.length&&(e.push(t),n))return n()},start:()=>{if(e.length<1||e.length>1)throw new Error("RE: re.mount() should be called and given a built game world");u(document.body).style({margin:"0px",padding:"0px",boxSizing:"border-box",border:"none"}),u("#RE_gameframe").style({width:"100vw",height:"100vh",position:"fixed",top:"0px",left:"0px",bottom:"0px",right:"0px",zIndex:"0",backgroundColor:"black",overflow:"hidden",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",margin:"0px",padding:"0px",boxSizing:"border-box"}),function(t){t.append(e[0])}(get("#RE_gameframe"))},loadImage:function(e,n){if("object"!=typeof e||n){if(!e||!n)throw new Error("cannot load image(s)");{const i=new Image;i.src=e,i.id=n,t.push(i)}}else for(let n=0;n<e.length;n++){const i=new Image;i.src=e[n][0],i.id=e[n][1],t.push(i)}},loadAudio:function(e,i){if("object"!=typeof e||i){if(!e||!i)throw new Error("cannot load image(s)");{const n=new Image;n.src=e,n.id=i,t.push(n)}}else for(let t=0;t<e.length;t++){const i=new Audio;i.src=e[t][0],i.id=e[t][1],n.push(i)}},getImg:function(e){let n;for(let i=0;i<t.length;i++)if(t[i].id===e){n=t[i];break}if(n)return n;throw new Error('RE: image of id "'+e+'" not found')},getAud:function(e){let t;for(let i=0;i<n.length;i++)if(n[i].id===e){t=n[i];break}if(t)return t;throw new Error('RE: audio id "'+e+'" not found')},cancel:()=>{get("#RE_gameframe").innerHTML="",renderer.toggleRendering()}}}(),entity=function(e,t,n){this.name=e||"none",this.painter=t||{},this.width=0,this.height=0,this.top=0,this.left=0,this.visible=!0,this.behaviors=n,this.delete=!1,this.border=!0,this.isHit=!1};entity.prototype={update(e,t){void 0!==this.painter.update&&this.visible&&this.painter.update(this,e,t)},paint(e,t){if(void 0===this.painter.paint||!this.visible)throw new Error(`RE: entity with name of ${this.name} has no paint function`);this.painter.paint(this,e,t)},observeBorder(e,t){this.top<=0?this.top*=0:t&&this.top+this.height>=t&&(this.top=t-this.height),this.left<=0?this.left*=0:e&&this.left+this.width>=e&&(this.left=e-this.width)},run(e,t){void 0!==this.behaviors&&this.behaviors(this,e,t)}};const imgPainter=function(e,t=1){this.image=e,this.delay=t,this.range=0};imgPainter.prototype={paint(e,t){this.range++,this.range%this.delay==0&&t.drawImage(this.image,e.left,e.top,e.width,e.height),this.range>100&&(this.range=1)}};const spriteSheetPainter=function(e,t=1,n=1,i=1){this.image=e,this.framesWidth=Math.round(this.image.width/t),this.framesHeight=Math.round(this.image.height/n),this.horizontalPictures=t,this.verticalPictures=n,this.frameHeightCount=0,this.frameWidthCount=0,this.range=0,this.delay=i,this.isLastImage=!1,this.animateAllFrames=!0,this.animate=!0,this.changeSheet=function(e,t=0,n=0,i=1){this.image=e,this.framesWidth=Math.round(this.image.width/t),this.framesHeight=Math.round(this.image.height/n),this.horizontalPictures=t,this.verticalPictures=n,this.delay=i},this.animateFrameOf=function(e=0){this.frameHeightCount=e,this.frameWidthCount<=this.horizontalPictures-2?this.frameWidthCount++:this.frameWidthCount=0}};spriteSheetPainter.prototype={update(){this.range++,this.range%this.delay==0&&this.animate&&this.animateAllFrames&&(this.frameHeightCount<this.verticalPictures-1?this.frameWidthCount<=this.horizontalPictures-2?this.frameWidthCount++:(this.isLastImage=!0,this.frameWidthCount=0,this.frameHeightCount++):this.frameHeightCount=0,this.frameHeightCount===this.verticalPictures&&this.frameHeightCount++),this.range>100&&(this.range=1)},paint(e,t){t.drawImage(this.image,this.framesWidth*this.frameWidthCount,this.framesHeight*this.frameHeightCount,this.framesWidth,this.framesHeight,e.left,e.top,e.width,e.height)}};const speaker=function(e,t="",n=1,i=1,o=1){const r=new SpeechSynthesisUtterance(e);r.lang=t,r.volume=.3*n*3,r.rate=i,r.pitch=o,speechSynthesis.speak(r)},speakerStop=()=>speechSynthesis&&speechSynthesis.cancel(),audio=function(e,t=0,n=1){return this.audio=e,this.audio.loop=t,this.audio.volume=.3*n,this.audio};audio.prototype={play(){this.audio.play()},pause(){this.audio.pause()},toggle(){this.audio.pause?this.audio.play():this.audio.pause()}};const bgPainter=function(e,t=10,n,i){this.image=e,this.range=0,this.speed=t,this.top=0,this.left=0,this.width=this.image.width,this.height=this.image.height,this.GoesUp=n,this.GoesLeft=i};bgPainter.prototype={update(){this.GoesLeft&&(this.left<=-this.width&&(this.left=0),this.left=this.left-this.speed),this.GoesUp&&(this.top>=this.height&&(this.top=0),this.top+=this.speed)},paint(e){const t=e.getContext("2d");t.drawImage(this.image,this.left,this.top,e.width,this.height),this.GoesLeft?t.drawImage(this.image,this.left+this.width,this.top,e.width,e.height):t.drawImage(this.image,this.left,this.top-this.height,e.width,this.height)}};const physics=function(){return{detectCollision:function(e,t,n=0){for(let i=0;i<t.length;i++)e.left+n>t[i].left+t[i].width||e.left+e.width<t[i].left+n||e.top>t[i].top+t[i].height||e.top+e.height<t[i].top+n||(t[i].isHit=!0)}}}(),renderer=function(){let e,t,n,i,o,r=0,s=0,a=!1;const l=[],c=[];function h(a){if(t=window.requestAnimationFrame(h),o=a-r,r=a,(s+=Math.round(o))>i)try{n.clearRect(0,0,e.width,e.height),function(e){if(l===[])return!1;l.forEach(t=>{t.paint(e),t.update()})}(e),c.forEach((t,i)=>{t.delete&&(c.splice(i,1),--i),t.border&&t.observeBorder(e.width,e.height),t.update(n,a),t.run(n,a),t.paint(n,a)})}catch(e){throw new Error(`RE: the canvas cannot be animated due to some errors > ${e}`)}s=0}return{render:function(t,o=0){if(!t)throw new Error("RE: game needs to be rendered EXP: renderer.render(canvas)");n=(e=t).getContext("2d"),i=o,h(0)},assemble:function(...e){if(!e)throw new Error("RE: No players assembled");return e.forEach(e=>{c.push(e)}),c},toggleRendering:function(){return a?(window.requestAnimationFrame(h),a=!1):(window.cancelAnimationFrame(t),a=!0)},backgroundImage:function(e,t,n,i){const o=new bgPainter(e,t,n,i);return l.push(o),o},copyCanvasTo:function(t,n,i){return t.getContext("2d").drawImage(e,0,0,t.width,t.height),t.style.opacity=n,t.style.borderRadius=i,t}}}(),uiedbook={css:css,media:media,animate:animate,build:build,buildTo:buildTo,xhr:xhr,u:u,isEmptyObject:isEmptyObject,isArray:isArray,each:each,intersect:intersect,error:error,get:get,rad:rad,makeClass:makeClass,create:create,download:download,debounce:debounce,keep:keep,check:check,log:log,store:store,retrieve:retrieve,remove:remove,getKey:getKey,clear:clear,onKeys:onKeys,continuesKeys:continuesKeys,swipe:swipe,buildCanvas:buildCanvas,appendCanvas:appendCanvas,re:re,entity:entity,imgPainter:imgPainter,spriteSheetPainter:spriteSheetPainter,audio:audio,bgPainter:bgPainter,renderer:renderer,speaker:speaker,speakerStop:speakerStop,physics:physics,route:route};"undefined"!=typeof module?module.exports=uiedbook:window.uiedbook=uiedbook;